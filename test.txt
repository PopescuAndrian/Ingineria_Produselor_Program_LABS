document.addEventListener("DOMContentLoaded", function () {
    const fetchButton = document.getElementById("fetchButton");
  
    // If the fetch button exists (only in index.html), set up the event
    if (fetchButton) {
        fetchButton.addEventListener("click", function () {
            window.location.href = "threads.html"; // Redirect to threads page
        });
    }
  
    // If we are on threads.html, fetch the Reddit data
    if (window.location.pathname.includes("threads.html")) {
        fetchRedditThreads();
    }
  });
  
  function fetchRedditThreads() {
    console.log("Fetching Reddit threads...");
  
    const url = "https://www.reddit.com/r/Home.json";
  
    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            console.log("Data received:", data);
            const posts = data.data.children;
            const threadsList = document.getElementById("threads");
            threadsList.innerHTML = ""; // Clear previous results
  
            if (posts.length === 0) {
                threadsList.innerHTML = "<li>No threads found.</li>";
                return;
            }
  
            posts.forEach(post => {
                const listItem = document.createElement("li");
                listItem.innerHTML = `<a href="https://www.reddit.com${post.data.permalink}" target="_blank">${post.data.title}</a>`;
                threadsList.appendChild(listItem);
            });
        })
        .catch(error => console.error("Error fetching data:", error));
  }